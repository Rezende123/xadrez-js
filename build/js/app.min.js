"use strict";var buildBoard=function(){var s=function(e){for(var n=[],r=0;r<8;r++)n.push(new ChessSquare(r,e));return n},u=document.querySelector("[board]");return function(){for(var e=[],n=0;n<8;n++){var r=s(n),o=new ChessRow(r);e.push(r),u.appendChild(o.element)}return e}()};function Game(e){var n=(this.rows=e).slice(0,2),r=e.slice(6),o=function(r,e){var n=[],o=function(e){n.push(e)};return e.forEach(function(e,n){"b"===r&&0===n||"w"===r&&1===n?(o(new Tower(e[0],r)),o(new Horse(e[1],r)),o(new Bishp(e[2],r)),o(new King(e[3],r)),o(new Queen(e[4],r)),o(new Bishp(e[5],r)),o(new Horse(e[6],r)),o(new Tower(e[7],r))):("b"===r&&1===n||"w"===r&&0===n)&&e.forEach(function(e){return o(new Pawn(e,r))})}),n};this.blackTeam=o("b",n),this.whiteTeam=o("w",r)}var chessRows=buildBoard(),game=new Game(chessRows);
"use strict";function ChessSquare(t,e,i){if(this.row=e,this.column=t,this.getId=function(){return id},this.idFormatter=function(t,e){return"r"+e+"c"+t},this.decodeId=function(t){var e=t.split("c"),i=e[1],r=e[0].split("r")[1];return[Number(i),Number(r)]},i)this.element=i;else{var r=this.idFormatter(t,e),n=document.createElement("div");n.setAttribute("chess-square",""),n.setAttribute("id",r),this.element=n}}function ChessRow(t){var e=document.createElement("div");e.setAttribute("chess-row",""),t&&t.length&&t.map(function(t){return t.element}).forEach(function(t){e.appendChild(t)}),this.element=e}
"use strict";var _slicedToArray=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function createPartImage(t){var e=document.createElement("img");return e.src="assets/"+t+".png",e.classList.add("img-part"),e}function createDivOption(e,t){var r=document.createElement("div");return r.classList.add("walk-option"),r.classList.add("cursor"),r.setAttribute("play-option",""),r.onclick=function(t){return e(t.target.parentNode)},r}function removeDivOptions(){Array.from(document.querySelectorAll("[play-option]")).forEach(function(t){return t.remove()})}function Part(t,e){var o=this;this.img=createPartImage(e),this.imgName=e,this.isTurn=!1,this.clearSquare=function(){o.square.element.classList.remove("cursor"),o.square.element.innerHTML="",o.square.element.onclick=null},this.setSquare=function(t){t.element.classList.add("cursor"),t.element.appendChild(o.img),o.square=t},this.move=function(t){removeDivOptions();var e=o.square.decodeId(t.id),r=_slicedToArray(e,2),i=r[0],n=r[1],a=new ChessSquare(i,n,t);o.clearSquare(),o.setSquare(a),o.square.element.onclick=o.walking},this.setSquare(t)}function Tower(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,e+"_torre")}function Horse(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,e+"_cavalo")}function Bishp(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,e+"_bispo")}function King(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,e+"_rei")}function Queen(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,e+"_rainha")}function Pawn(t){var c=this,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"b";Part.call(this,t,l+"_peao"),this.isFirstStep=!0,this.color=l,this.walking=function(){if(c.isTurn){var o=c.square.column,s=c.square.row;removeDivOptions();var t=function(t){for(var e=1;e<=t;e++){var r="b"==l?1:-1,i=c.square.idFormatter(o,s+r*e),n=document.getElementById(i),a=createDivOption(c.move);n.appendChild(a)}};c.isFirstStep?(t(2),c.isFirstStep=!1):t(1),c.isTurn=!1}},this.square.element.onclick=this.walking}